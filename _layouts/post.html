---
layout: default
---

<!-- Post Layout -->
<article class="post-layout">
  <div class="wrapper">
    <div class="post-container">
      <!-- Post Header -->
      <header class="post-header">
        <!-- Cover Image (if exists) -->
        {% if page.cover %}
        <div class="post-cover">
          <img src="{{ page.cover | relative_url }}" alt="{{ page.title }}" />
        </div>
        {% endif %}

        <!-- Post Meta -->
        <div class="post-meta">
          {% if page.categories.size > 0 %}
          <a href="{{ '/categories' | relative_url }}" class="post-category">
            {{ page.categories | first }}
          </a>
          {% endif %}
          <time class="post-date" datetime="{{ page.date | date: '%Y-%m-%d' }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"></circle>
              <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
            {{ page.date | date: "%Y年%m月%d日" }}
          </time>
          {% if page.last_modified_at %}
          <time class="post-modified" datetime="{{ page.last_modified_at | date: '%Y-%m-%d' }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
            </svg>
            更新于 {{ page.last_modified_at | date: "%Y-%m-%d" }}
          </time>
          {% endif %}
        </div>

        <!-- Post Title -->
        <h1 class="post-title">{{ page.title }}</h1>

        <!-- Tags -->
        {% if page.tags.size > 0 %}
        <div class="post-tags">
          {% for tag in page.tags %}
          <a href="{{ '/tags' | relative_url }}#{{ tag | slugify }}" class="post-tag">
            #{{ tag }}
          </a>
          {% endfor %}
        </div>
        {% endif %}
      </header>

      <!-- Post Content -->
      <div class="post-content">
        {{ content }}
      </div>

      <!-- Post Footer -->
      <footer class="post-footer">
        <!-- Post Navigation -->
        <div class="post-navigation">
          {% if page.previous %}
          <a href="{{ page.previous.url | relative_url }}" class="nav-link nav-prev">
            <span class="nav-direction">← 上一篇</span>
            <span class="nav-title">{{ page.previous.title }}</span>
          </a>
          {% else %}
          <div class="nav-link nav-prev disabled">
            <span class="nav-direction">← 上一篇</span>
            <span class="nav-title">没有更早的文章了</span>
          </div>
          {% endif %}

          {% if page.next %}
          <a href="{{ page.next.url | relative_url }}" class="nav-link nav-next">
            <span class="nav-direction">下一篇 →</span>
            <span class="nav-title">{{ page.next.title }}</span>
          </a>
          {% else %}
          <div class="nav-link nav-next disabled">
            <span class="nav-direction">下一篇 →</span>
            <span class="nav-title">没有更多文章了</span>
          </div>
          {% endif %}
        </div>

        <!-- Related Posts -->
        {% assign related_posts = site.posts | where_exp:"post", "post.url != page.url" | limit: 4 %}
        {% assign has_related = false %}
        {% for post in related_posts %}
          {% for cat in post.categories %}
            {% if page.categories contains cat %}
              {% assign has_related = true %}
              {% break %}
            {% endif %}
          {% endfor %}
          {% if has_related %}{% break %}{% endif %}
        {% endfor %}
        {% if has_related %}
        <div class="related-posts">
          <h3 class="related-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
              <circle cx="9" cy="7" r="4"></circle>
              <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
              <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
            相关文章
          </h3>
          <div class="related-list">
            {% assign count = 0 %}
            {% for post in related_posts %}
              {% if count < 3 %}
                {% assign is_related = false %}
                {% for cat in post.categories %}
                  {% if page.categories contains cat %}
                    {% assign is_related = true %}
                    {% break %}
                  {% endif %}
                {% endfor %}
                {% if is_related %}
                  {% assign count = count | plus: 1 %}
            <a href="{{ post.url | relative_url }}" class="related-item">
              <span class="related-date">{{ post.date | date: "%Y-%m-%d" }}</span>
              <span class="related-title-text">{{ post.title }}</span>
            </a>
                {% endif %}
              {% endif %}
            {% endfor %}
          </div>
        </div>
        {% endif %}
      </footer>
    </div>
  </div>
</article>

<link rel="stylesheet" href="{{ '/assets/css/post.css' | relative_url }}" />
